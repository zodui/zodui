import"./theme-switcher-4ee9bded.js";import{e as L}from"./react-64d51446.js";import"./schema-eval-f25a10fb.js";import"./comps-lib-tdesign-b131519f.js";import"zod";import"./tdesign-react-90877bd8.js";import"./tdesign-icons-react-1b74273e.js";const g={};window.createEleByTmpl=function(e,o){const t=g[e]||(g[e]=document.getElementById(e).innerHTML.trim()),s=document.createElement("div");return s.innerHTML=Object.keys(o).reduce((n,r)=>n.replace(new RegExp(`{{${r}}}`,"g"),o[r]),t),s.children[0]};window.copyToClipboard=function(e){const o=document.createElement("input");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)};window.base64=function(e,o=!0){return o?decodeURIComponent(atob(e)):btoa(encodeURIComponent(e))};window.throttle=function(e,o){let t=null;return function(...s){t||(t=setTimeout(()=>{e.apply(this,s),t=null},o))}};window.debounce=function(e,o){let t=null;return function(...s){t&&clearTimeout(t),t=setTimeout(()=>{e.apply(this,s),t=null},o)}};let m=[];window.showMessage=function(e,o=3e3){const t=createEleByTmpl("message-template",{content:e}),s=m.reduce((n,r)=>n+r.offsetHeight+10,10);t.style.top=s+"px",document.body.appendChild(t),m.push(t),setTimeout(()=>{t.classList.add("show")},0),setTimeout(()=>{t.classList.remove("show"),setTimeout(()=>{document.body.removeChild(t),m=m.filter(n=>n!==t)},300)},o)};window.attachMenu=function(e,o){const t=createEleByTmpl("popper",{content:o.map(c=>`<div class='menu-item'>${c.title}</div>`).join("")});document.body.appendChild(t);const s=L(e,t,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,-5]}},{name:"preventOverflow",options:{padding:12}}]}),n=()=>{t.removeAttribute("data-show"),s.update()},r=()=>{t.focus(),t.setAttribute("data-show",""),s.update()};e.addEventListener("click",()=>{t.hasAttribute("data-show")?n():r()}),t.addEventListener("blur",()=>{n()})};const v=`import * as z from 'zod'

export default z
  .object({
    foo: z.string(),
    bar: z.number().mode('split')
  })
  .label('Object')
  .describe('This is a Object Configuration')
`,E=4;document.querySelectorAll(".monaco-editor").forEach(e=>{const{key:o="",byHash:t=!1,enableHistory:s=!1}=e.dataset,n=monaco.editor.create(e,{theme:window.theme==="dark"?"vs-dark":"vs",value:v,language:"typescript",tabSize:2,automaticLayout:!0,model:monaco.editor.createModel("","typescript",monaco.Uri.parse(`file:///${o??"main"}.ts`))});window.onThemeChange(i=>{if(n)monaco.editor.setTheme(i==="dark"?"vs-dark":"vs");else{const l=setInterval(()=>{n&&(monaco.editor.setTheme(i==="dark"?"vs-dark":"vs"),clearInterval(l))},100)}});function r(){const i=location.hash.slice(1),l=i?base64(i):v;n.setValue(l),emitCode(o,l)}t&&(window.addEventListener("hashchange",r),r()),monaco.languages.typescript.typescriptDefaults.setExtraLibs(MONACO_DTS_FILES);const c=[];let a=-1;n.onDidChangeModelContent(debounce(function(){emitCode(o,n.getValue())},1500)),n.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyS,()=>{const i=n.getValue();emitCode(o,i),t&&(history.pushState(null,"","#"+base64(i,!1)),copyToClipboard(location.href),showMessage('<h3 style="margin: 0">url copied to clipboard, share it with your friends!</h3>'),n.focus())}),n.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.UpArrow,function(){a===-1?a=c.length-1:a--,a<0&&(a=0),n.setValue(c[a].code)}),n.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.DownArrow,function(){a===-1?a=c.length-1:a++,a>=c.length&&(a=c.length-1),n.setValue(c[a].code)}),n.focus();let h;function w(i){const l=i.x-h,S=parseInt(getComputedStyle(e,"").width)+l;h=i.x,e.style.width=S+"px",e.style.minWidth="5px"}let p=!1;e.addEventListener("mousedown",i=>{i.offsetX>e.offsetWidth-E&&(h=i.x,p?e.style.width="500px":(p=!0,setTimeout(()=>p=!1,1e3)),document.addEventListener("mousemove",w,!1),e.style.userSelect="none")},!1),document.addEventListener("mouseup",()=>{e.style.userSelect="auto",document.removeEventListener("mousemove",w,!1)})});const d=document.querySelector(".code-editor"),f=d.querySelector(".menu"),b=d.querySelector(".menu-page"),T=b.querySelector(".settings");f.querySelector(".item.settings").addEventListener("click",()=>{b.classList.toggle("show"),T.classList.toggle("show")});const k=f.querySelector(".item.share");attachMenu(k,[{title:"Copy as Markdown Issue"},{title:"Copy as Markdown Link"},{title:"Copy as Markdown Link with Preview"},{title:"Open in CodeSandbox"},{title:"Open in StackBlitz"}]);function y(e=new URLSearchParams(location.search).get("fold")==="1"){e?(d.classList.add("fold"),d.style.marginLeft="-"+d.scrollWidth+"px"):(d.classList.remove("fold"),d.style.marginLeft="0")}window.addEventListener("popstate",()=>{y()});y();f.querySelector(".item.fold").addEventListener("click",()=>{y(!0);const e=location.hash,o=new URLSearchParams(location.search);history.pushState(null,"",`?${new URLSearchParams({...Object.fromEntries(o),fold:d.classList.contains("fold")?"1":"0"})}${e}`)});const C=new URLSearchParams(location.search).get("settings");C&&evalerValueEmitter.emit("settings::init",JSON.parse(C));const u=document.querySelector('.schema-eval-container[data-key="playground"]');evalerValueEmitter.on("settings",e=>{const{mode:o,width:[t,s]=[80,"%"],...n}=e;o&&o!=="default"?u.dataset.mode=o:delete u.dataset.mode,o==="card"?u.style.setProperty("--width",`${t}${s}`):u.style.removeProperty("--width");const r=location.hash,c=new URLSearchParams(location.search),a=JSON.parse(c.get("settings")||"{}");history.pushState(null,"",`?${new URLSearchParams({...Object.fromEntries(c),settings:JSON.stringify({...a,...e})})}${r}`)});evalerValueEmitter.on("playground",e=>{console.log("Playground form value:",e)});setTimeout(()=>{document.querySelector("body > main").classList.remove("loading")},650);
